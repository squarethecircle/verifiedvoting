<!-- Challenge for chosen candidate -->

<html>
	<head>
		<link rel="stylesheet" href="{{ url_for('static', filename='styles/main.css') }}">
		<script>
			document.addEventListener('keydown', function(event) {
			    if (event.keyCode == 13) {
			        var challenges_form = document.getElementById("challenges_form");
			    	// console.log(challenges_form);
			    	challenges_form.submit();
			    }
			    else if (event.keyCode == 27) {
			    	document.location.href = '/stage0';
			    }
			}, true);
		</script>
	</head>
	<body>
		<p>Voter ID: <b>{{ voter_id }}</b></p>
		<p>You are voting for: <b>{{ cand_dict[chosen] }}</b></p>

		<p>Is this challenge ok?</p>
		<p>Press <b>ENTER</b> to accept, <b>ESC</b> to vote for someone else, or use <b>TAB</b> to select the challenge to edit.</p>


		<form id="challenges_form" action="/stage5" method="post">
			<table border="1">
				<tr> 
					<th> # </th>
					<th> candidate </th>
					<th> challenge </th>
				</tr>
				{% for c in candidates %}
					<tr>
						<td>{{ c }}</td>
						<td>{{ cand_dict[c] }}</td>
						{% if c != chosen %}
							<td>{{ challenges[c] }}</td>
						{% else %}				
							<td><input type="text" name="chosen_challenge" value="{{ chosen_challenge }}"></td> 
						{% endif %}
					</tr>
				{% endfor %}
			</table>
		</form>


		<!-- <form id="challenges_form" action="/stage5" method="post">
			{% for c in candidates %}
				{% if c != chosen %}
					<p> {{ c }} | {{ cand_dict[c] }} | {{ challenges[c] }} </p>
				{% else %}
					<p> {{ c }} | {{ cand_dict[c] }} | <input type="text" name="chosen_challenge" value="{{ chosen_challenge }}"> </p>
				{% endif %}
			{% endfor %}
		</form> -->
	</body>

</html>